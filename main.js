/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/rsync/rsync.js
var require_rsync = __commonJS({
  "node_modules/rsync/rsync.js"(exports, module2) {
    var spawn = require("child_process").spawn;
    var path = require("path");
    function Rsync2(config) {
      if (!(this instanceof Rsync2)) {
        return new Rsync2(config);
      }
      config = config || {};
      if (typeof config !== "object") {
        throw new Error("Rsync config must be an Object");
      }
      this._executable = hasOP(config, "executable") ? config.executable : "rsync";
      this._executableShell = hasOP(config, "executableShell") ? config.executableShell : "/bin/sh";
      this._sources = [];
      this._destination = "";
      this._patterns = [];
      this._options = {};
      this._outputHandlers = {
        stdout: null,
        stderr: null
      };
      this._cwd = process.cwd();
      this._env = process.env;
      this._debug = hasOP(config, "debug") ? config.debug : false;
    }
    Rsync2.build = function(options) {
      var command = new Rsync2();
      for (var key in options) {
        if (hasOP(options, key)) {
          var value = options[key];
          if (typeof command[key] === "function") {
            command[key](value);
          }
        }
      }
      return command;
    };
    Rsync2.prototype.set = function(option, value) {
      option = stripLeadingDashes(option);
      if (option && option.length > 0) {
        this._options[option] = value || null;
      }
      return this;
    };
    Rsync2.prototype.unset = function(option) {
      option = stripLeadingDashes(option);
      if (option && Object.keys(this._options).indexOf(option) >= 0) {
        delete this._options[option];
      }
      return this;
    };
    Rsync2.prototype.flags = function(flags, set) {
      if (!arguments.length) {
        return this;
      } else if (arguments.length === 1) {
        set = true;
      } else {
        flags = Array.prototype.slice.call(arguments);
        if (typeof flags[flags.length - 1] === "boolean") {
          set = flags.pop();
        } else {
          set = true;
        }
        flags = flags.join("");
      }
      if (typeof flags === "string") {
        flags = stripLeadingDashes(flags).split("");
      }
      if (isArray(flags)) {
        var obj = {};
        flags.forEach(function(f) {
          obj[f] = set;
        });
        flags = obj;
      }
      for (var key in flags) {
        if (hasOP(flags, key)) {
          var method = flags[key] ? "set" : "unset";
          this[method](stripLeadingDashes(key));
        }
      }
      return this;
    };
    Rsync2.prototype.isSet = function(option) {
      option = stripLeadingDashes(option);
      return Object.keys(this._options).indexOf(option) >= 0;
    };
    Rsync2.prototype.option = function(name) {
      name = stripLeadingDashes(name);
      return this._options[name];
    };
    Rsync2.prototype.patterns = function(patterns) {
      if (arguments.length > 1) {
        patterns = Array.prototype.slice.call(arguments, 0);
      }
      if (!isArray(patterns)) {
        patterns = [patterns];
      }
      patterns.forEach(function(pattern) {
        var action = "?";
        if (typeof pattern === "string") {
          action = pattern.charAt(0);
          pattern = pattern.substring(1);
        } else if (typeof pattern === "object" && hasOP(pattern, "action") && hasOP(pattern, "pattern")) {
          action = pattern.action;
          pattern = pattern.pattern;
        }
        if (action === "-") {
          this.exclude(pattern);
        } else if (action === "+") {
          this.include(pattern);
        } else {
          throw new Error("Invalid pattern: " + pattern);
        }
      }, this);
      return this;
    };
    Rsync2.prototype.exclude = function(patterns) {
      if (arguments.length > 1) {
        patterns = Array.prototype.slice.call(arguments, 0);
      }
      if (!isArray(patterns)) {
        patterns = [patterns];
      }
      patterns.forEach(function(pattern) {
        this._patterns.push({ action: "-", pattern });
      }, this);
      return this;
    };
    Rsync2.prototype.include = function(patterns) {
      if (arguments.length > 1) {
        patterns = Array.prototype.slice.call(arguments, 0);
      }
      if (!isArray(patterns)) {
        patterns = [patterns];
      }
      patterns.forEach(function(pattern) {
        this._patterns.push({ action: "+", pattern });
      }, this);
      return this;
    };
    Rsync2.prototype.command = function() {
      return this.executable() + " " + this.args().join(" ");
    };
    Rsync2.prototype.toString = Rsync2.prototype.command;
    Rsync2.prototype.args = function() {
      var args = [];
      var short = [];
      var long = [];
      for (var key in this._options) {
        if (hasOP(this._options, key)) {
          var value = this._options[key];
          var noval = value === null || value === void 0;
          if (key.length === 1 && noval) {
            short.push(key);
          } else {
            if (isArray(value)) {
              value.forEach(function(val) {
                long.push(buildOption(key, val, escapeShellArg));
              });
            } else {
              long.push(buildOption(key, value, escapeShellArg));
            }
          }
        }
      }
      if (short.length > 0) {
        args.push("-" + short.join(""));
      }
      if (long.length > 0) {
        args = args.concat(long);
      }
      this._patterns.forEach(function(def) {
        if (def.action === "-") {
          args.push(buildOption("exclude", def.pattern, escapeFileArg));
        } else if (def.action === "+") {
          args.push(buildOption("include", def.pattern, escapeFileArg));
        } else {
          debug(this, "Unknown pattern action " + def.action);
        }
      });
      if (this.source().length > 0) {
        args = args.concat(this.source().map(escapeFileArg));
      }
      if (this.destination()) {
        args.push(escapeFileArg(this.destination()));
      }
      return args;
    };
    Rsync2.prototype.cwd = function(cwd) {
      if (arguments.length > 0) {
        if (typeof cwd !== "string") {
          throw new Error("Directory should be a string");
        }
        this._cwd = path.resolve(cwd);
      }
      return this._cwd;
    };
    Rsync2.prototype.env = function(env) {
      if (arguments.length > 0) {
        if (typeof env !== "object") {
          throw new Error("Environment should be an object");
        }
        this._env = env;
      }
      return this._env;
    };
    Rsync2.prototype.output = function(stdout, stderr) {
      if (arguments.length === 1 && Array.isArray(stdout)) {
        stderr = stdout[1];
        stdout = stdout[0];
      }
      if (typeof stdout === "function") {
        this._outputHandlers.stdout = stdout;
      }
      if (typeof stderr === "function") {
        this._outputHandlers.stderr = stdout;
      }
      return this;
    };
    Rsync2.prototype.execute = function(callback, stdoutHandler, stderrHandler) {
      this.output(stdoutHandler, stderrHandler);
      var cmdProc;
      if (process.platform === "win32") {
        cmdProc = spawn("cmd.exe", ["/s", "/c", '"' + this.command() + '"'], { stdio: "pipe", windowsVerbatimArguments: true, cwd: this._cwd, env: this._env });
      } else {
        cmdProc = spawn(this._executableShell, ["-c", this.command()], { stdio: "pipe", cwd: this._cwd, env: this._env });
      }
      if (typeof this._outputHandlers.stdout === "function") {
        cmdProc.stdout.on("data", this._outputHandlers.stdout);
      }
      if (typeof this._outputHandlers.stderr === "function") {
        cmdProc.stderr.on("data", this._outputHandlers.stderr);
      }
      cmdProc.on("close", function(code) {
        var error = null;
        if (code !== 0) {
          error = new Error("rsync exited with code " + code);
        }
        if (typeof callback === "function") {
          callback(error, code, this.command());
        }
      }.bind(this));
      return cmdProc;
    };
    createValueAccessor("debug");
    createValueAccessor("executable");
    createValueAccessor("executableShell");
    createValueAccessor("destination");
    createListAccessor("source", "_sources");
    exposeLongOption("rsh", "shell");
    exposeMultiOption("chmod", "chmod");
    exposeShortOption("delete");
    exposeShortOption("progress");
    exposeShortOption("a", "archive");
    exposeShortOption("z", "compress");
    exposeShortOption("r", "recursive");
    exposeShortOption("u", "update");
    exposeShortOption("q", "quiet");
    exposeShortOption("d", "dirs");
    exposeShortOption("l", "links");
    exposeShortOption("n", "dry");
    exposeShortOption("H", "hardLinks");
    exposeShortOption("p", "perms");
    exposeShortOption("E", "executability");
    exposeShortOption("g", "group");
    exposeShortOption("o", "owner");
    exposeShortOption("A", "acls");
    exposeShortOption("X", "xattrs");
    exposeShortOption("devices");
    exposeShortOption("specials");
    exposeShortOption("t", "times");
    module2.exports = Rsync2;
    function createValueAccessor(name, internal) {
      var container = internal || "_" + name;
      Rsync2.prototype[name] = function(value) {
        if (!arguments.length)
          return this[container];
        this[container] = value;
        return this;
      };
    }
    function createListAccessor(name, internal) {
      var container = internal || "_" + name;
      Rsync2.prototype[name] = function(value) {
        if (!arguments.length)
          return this[container];
        if (isArray(value)) {
          value.forEach(this[name], this);
        } else if (typeof value !== "string") {
          throw new Error("Value for Rsync::" + name + " must be a String");
        } else if (this[container].indexOf(value) < 0) {
          this[container].push(value);
        }
        return this;
      };
    }
    function exposeShortOption(option, name) {
      name = name || option;
      Rsync2.prototype[name] = function(set) {
        if (!arguments.length)
          set = true;
        var method = set ? "set" : "unset";
        return this[method](option);
      };
    }
    function exposeMultiOption(option, name) {
      name = name || option;
      Rsync2.prototype[name] = function(value) {
        if (!arguments.length)
          return this.option(option);
        if (!value) {
          this.unset(option);
        } else if (isArray(value)) {
          value.forEach(this[name], this);
        } else {
          var current = this.option(option);
          if (!current) {
            value = [value];
          } else if (!isArray(current)) {
            value = [current, value];
          } else {
            value = current.concat(value);
          }
          this.set(option, value);
        }
        return this;
      };
    }
    function exposeLongOption(option, name) {
      name = name || option;
      Rsync2.prototype[name] = function(value) {
        if (!arguments.length)
          return this.option(option);
        var method = value ? "set" : "unset";
        return this[method](option, value);
      };
    }
    function buildOption(name, value, escapeArg) {
      if (typeof escapeArg === "boolean") {
        escapeArg = !escapeArg ? noop : null;
      }
      if (typeof escapeArg !== "function") {
        escapeArg = escapeShellArg;
      }
      var single = name.length === 1 ? true : false;
      var prefix = single ? "-" : "--";
      var glue = single ? " " : "=";
      var option = prefix + name;
      if (arguments.length > 1 && value) {
        value = escapeArg(String(value));
        option += glue + value;
      }
      return option;
    }
    function escapeShellArg(arg) {
      if (!/(["'`\\$ ])/.test(arg)) {
        return arg;
      }
      return '"' + arg.replace(/(["'`\\$])/g, "\\$1") + '"';
    }
    function escapeFileArg(filename) {
      filename = filename.replace(/(["'`\s\\\(\)\\$])/g, "\\$1");
      if (!/(\\\\)/.test(filename)) {
        return filename;
      }
      if (process.platform === "win32") {
        filename = filename.replace(/\\\\/g, "/").replace(/^["]?[A-Z]\:\//ig, "/");
      }
      return filename;
    }
    function stripLeadingDashes(value) {
      if (typeof value === "string") {
        value = value.replace(/^[\-]*/, "");
      }
      return value;
    }
    function isArray(value) {
      if (typeof Array.isArray === "function") {
        return Array.isArray(value);
      } else {
        return toString.call(value) == "[object Array]";
      }
    }
    function hasOP(obj, key) {
      return Object.prototype.hasOwnProperty.call(obj, key);
    }
    function noop() {
    }
    function debug(cmd, message) {
      if (!cmd._debug)
        return;
    }
  }
});

// main.ts
__export(exports, {
  default: () => MyPlugin
});
var import_obsidian = __toModule(require("obsidian"));
var Rsync = require_rsync();
var DEFAULT_SETTINGS = {
  keyPath: "",
  remoteUrl: "",
  remotePath: "",
  cygwinPath: "F:/cygwin/bin/bash.exe"
};
function rsyncwrapper(source, dest, settings) {
  var rsync = new Rsync().flags("rqu").executable(settings.cygwinPath + " -lc 'rsync").set("rsh", "ssh -i " + settings.keyPath).set("size-only").set("exclude", "*plugins").source(source).destination(dest);
  var pass = "true";
  if (settings.keyPath == "")
    pass = "No key";
  console.log(rsync.command());
  if (pass === "true")
    rsync.execute(function(error, code, cmd) {
      if (error == null)
        console.log("Done!");
      else
        console.log(error);
    });
  else
    console.log('Sync failed! "' + pass + '"');
}
function rsyncdelete(localPath, filePath, settings, vaultName) {
  localPath = "/cygdrive/c/" + localPath;
  const fileName = filePath.split("/").last();
  filePath = filePath.slice(0, -fileName.length);
  var rsync = new Rsync().flags("r").executable(settings.cygwinPath + " -lc 'rsync").set("rsh", "ssh -i " + settings.keyPath).set("delete").set("include", fileName).set("exclude", "*").source(localPath + vaultName + "/.obsidian/").destination(settings.remoteUrl + ":" + settings.remotePath + vaultName + "/" + filePath);
  var pass = "true";
  if (settings.keyPath == "")
    pass = "No key";
  console.log(rsync.command());
  rsync.output(function(data) {
    console.log(data);
  }, function(data) {
    console.log("ERROR!!");
    console.log(data);
  });
  if (pass === "true")
    rsync.execute(function(error, code, cmd) {
      if (error == null) {
        rsyncwrapper(localPath + vaultName, settings.remoteUrl + ":" + settings.remotePath, settings);
      } else
        console.log(error);
    });
  else
    console.log('Sync failed! "' + pass + '"');
}
var MyPlugin = class extends import_obsidian.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      const debug = false;
      const vaultName = this.app.vault.getName();
      const keyPath = this.settings.keyPath;
      const remote = this.settings.remoteUrl + ":" + this.settings.remotePath;
      const local = "/cygdrive/c/" + this.app.vault.adapter.basePath.slice(3, -vaultName.length);
      const settings = this.settings;
      var app = this.app;
      this.registerEvent(this.app.vault.on("modify", () => {
        rsyncwrapper(local + vaultName, remote, this.settings);
      }));
      this.registerEvent(this.app.vault.on("delete", function(file) {
        console.log(file);
      }));
      this.registerEvent(this.app.vault.on("rename", function(file, oldPath) {
        rsyncdelete(app.vault.adapter.basePath.slice(3, -vaultName.length), oldPath, settings, vaultName);
      }));
      if (debug) {
        const ribbonIconEl = this.addRibbonIcon("dice", "Sample Plugin", (evt) => {
          new import_obsidian.Notice("This is a notice!");
        });
        ribbonIconEl.addClass("my-plugin-ribbon-class");
        const statusBarItemEl = this.addStatusBarItem();
        statusBarItemEl.setText("Status Bar Text");
        this.addCommand({
          id: "open-sample-modal-simple",
          name: "Open sample modal (simple)",
          callback: () => {
            new SampleModal(this.app).open();
          }
        });
        this.addCommand({
          id: "sample-editor-command",
          name: "Sample editor command",
          editorCallback: (editor, view) => {
            console.log(editor.getSelection());
            editor.replaceSelection("Sample Editor Command");
          }
        });
        this.addCommand({
          id: "open-sample-modal-complex",
          name: "Open sample modal (complex)",
          checkCallback: (checking) => {
            const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
            if (markdownView) {
              if (!checking) {
                new SampleModal(this.app).open();
              }
              return true;
            }
          }
        });
      }
      this.addSettingTab(new SampleSettingTab(this.app, this));
      this.registerDomEvent(document, "click", (evt) => {
      });
    });
  }
  onunload() {
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var SampleModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.setText("Woah!");
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var SampleSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Sync Settings." });
    new import_obsidian.Setting(containerEl).setName("SSH Key Path").setDesc("Your SSH Private Key, used for logging into server. Please generate the key to use no password, just wont work otherwise. If you're on Windows, use the cygdrive path to the key.").addText((text) => text.setPlaceholder("Enter the path to your secret key.").setValue(this.plugin.settings.keyPath).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.keyPath = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Remote address").setDesc("Remote server URL/IP").addText((text) => text.setPlaceholder("name@example.com").setValue(this.plugin.settings.remoteUrl).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.remoteUrl = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Remote directory").setDesc("Path to the remote backup folder.").addText((text) => text.setPlaceholder("~/.obsidian/sync").setValue(this.plugin.settings.remotePath).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.remotePath = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("Cygwin bash path").setDesc("Needed for Windows.").addText((text) => text.setPlaceholder("F:/cygwin/bin/bash.exe").setValue(this.plugin.settings.cygwinPath).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.cygwinPath = value;
      yield this.plugin.saveSettings();
    })));
  }
};
/**
 * Rsync is a wrapper class to configure and execute an `rsync` command
 * in a fluent and convenient way.
 *
 * A new command can be set up by creating a new `Rsync` instance of
 * obtaining one through the `build` method.
 *
 * @example
 *   // using the constructor
 *   var rsync = new Rsync()
 *       .source('/path/to/source')
 *       .destination('myserver:destination/');
 *
 *   // using the build method with options
 *   var rsync = Rsync.build({
 *     source:      '/path/to/source',
 *     destination: 'myserver:destination/'
 *   });
 *
 * Executing the command can be done using the `execute` method. The command
 * is executed as a child process and three callbacks can be registered. See
 * the `execute` method for more details.
 *
 * @example
 *   rsync.execute(function(error, code, cmd) {
 *     // function called when the child process is finished
 *   }, function(stdoutChunk) {
 *     // function called when a chunk of text is received on stdout
 *   }, function stderrChunk) {
 *     // function called when a chunk of text is received on stderr
 *   });
 *
 * @author      Mattijs Hoitink <mattijs@monkeyandmachine.com>
 * @copyright   Copyright (c) 2013, Mattijs Hoitink <mattijs@monkeyandmachine.com>
 * @license     The MIT License
 *
 * @constructor
 * @param {Object} config Configuration settings for the Rsync wrapper.
 */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL3JzeW5jL3JzeW5jLmpzIiwgIm1haW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbInZhciBzcGF3biA9IHJlcXVpcmUoJ2NoaWxkX3Byb2Nlc3MnKS5zcGF3bjtcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG4vKipcbiAqIFJzeW5jIGlzIGEgd3JhcHBlciBjbGFzcyB0byBjb25maWd1cmUgYW5kIGV4ZWN1dGUgYW4gYHJzeW5jYCBjb21tYW5kXG4gKiBpbiBhIGZsdWVudCBhbmQgY29udmVuaWVudCB3YXkuXG4gKlxuICogQSBuZXcgY29tbWFuZCBjYW4gYmUgc2V0IHVwIGJ5IGNyZWF0aW5nIGEgbmV3IGBSc3luY2AgaW5zdGFuY2Ugb2ZcbiAqIG9idGFpbmluZyBvbmUgdGhyb3VnaCB0aGUgYGJ1aWxkYCBtZXRob2QuXG4gKlxuICogQGV4YW1wbGVcbiAqICAgLy8gdXNpbmcgdGhlIGNvbnN0cnVjdG9yXG4gKiAgIHZhciByc3luYyA9IG5ldyBSc3luYygpXG4gKiAgICAgICAuc291cmNlKCcvcGF0aC90by9zb3VyY2UnKVxuICogICAgICAgLmRlc3RpbmF0aW9uKCdteXNlcnZlcjpkZXN0aW5hdGlvbi8nKTtcbiAqXG4gKiAgIC8vIHVzaW5nIHRoZSBidWlsZCBtZXRob2Qgd2l0aCBvcHRpb25zXG4gKiAgIHZhciByc3luYyA9IFJzeW5jLmJ1aWxkKHtcbiAqICAgICBzb3VyY2U6ICAgICAgJy9wYXRoL3RvL3NvdXJjZScsXG4gKiAgICAgZGVzdGluYXRpb246ICdteXNlcnZlcjpkZXN0aW5hdGlvbi8nXG4gKiAgIH0pO1xuICpcbiAqIEV4ZWN1dGluZyB0aGUgY29tbWFuZCBjYW4gYmUgZG9uZSB1c2luZyB0aGUgYGV4ZWN1dGVgIG1ldGhvZC4gVGhlIGNvbW1hbmRcbiAqIGlzIGV4ZWN1dGVkIGFzIGEgY2hpbGQgcHJvY2VzcyBhbmQgdGhyZWUgY2FsbGJhY2tzIGNhbiBiZSByZWdpc3RlcmVkLiBTZWVcbiAqIHRoZSBgZXhlY3V0ZWAgbWV0aG9kIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQGV4YW1wbGVcbiAqICAgcnN5bmMuZXhlY3V0ZShmdW5jdGlvbihlcnJvciwgY29kZSwgY21kKSB7XG4gKiAgICAgLy8gZnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNoaWxkIHByb2Nlc3MgaXMgZmluaXNoZWRcbiAqICAgfSwgZnVuY3Rpb24oc3Rkb3V0Q2h1bmspIHtcbiAqICAgICAvLyBmdW5jdGlvbiBjYWxsZWQgd2hlbiBhIGNodW5rIG9mIHRleHQgaXMgcmVjZWl2ZWQgb24gc3Rkb3V0XG4gKiAgIH0sIGZ1bmN0aW9uIHN0ZGVyckNodW5rKSB7XG4gKiAgICAgLy8gZnVuY3Rpb24gY2FsbGVkIHdoZW4gYSBjaHVuayBvZiB0ZXh0IGlzIHJlY2VpdmVkIG9uIHN0ZGVyclxuICogICB9KTtcbiAqXG4gKiBAYXV0aG9yICAgICAgTWF0dGlqcyBIb2l0aW5rIDxtYXR0aWpzQG1vbmtleWFuZG1hY2hpbmUuY29tPlxuICogQGNvcHlyaWdodCAgIENvcHlyaWdodCAoYykgMjAxMywgTWF0dGlqcyBIb2l0aW5rIDxtYXR0aWpzQG1vbmtleWFuZG1hY2hpbmUuY29tPlxuICogQGxpY2Vuc2UgICAgIFRoZSBNSVQgTGljZW5zZVxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBDb25maWd1cmF0aW9uIHNldHRpbmdzIGZvciB0aGUgUnN5bmMgd3JhcHBlci5cbiAqL1xuZnVuY3Rpb24gUnN5bmMoY29uZmlnKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJzeW5jKSkge1xuICAgICAgICByZXR1cm4gbmV3IFJzeW5jKGNvbmZpZyk7XG4gICAgfVxuXG4gICAgLy8gUGFyc2UgY29uZmlnXG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICAgIGlmICh0eXBlb2YoY29uZmlnKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSc3luYyBjb25maWcgbXVzdCBiZSBhbiBPYmplY3QnKTtcbiAgICB9XG5cbiAgICAvLyBleGVjdXRhYmxlXG4gICAgdGhpcy5fZXhlY3V0YWJsZSA9IGhhc09QKGNvbmZpZywgJ2V4ZWN1dGFibGUnKSA/IGNvbmZpZy5leGVjdXRhYmxlIDogJ3JzeW5jJztcblxuICAgIC8vIHNoZWxsXG4gICAgdGhpcy5fZXhlY3V0YWJsZVNoZWxsID0gaGFzT1AoY29uZmlnLCAnZXhlY3V0YWJsZVNoZWxsJykgPyBjb25maWcuZXhlY3V0YWJsZVNoZWxsIDogJy9iaW4vc2gnO1xuXG4gICAgLy8gc291cmNlKHMpIGFuZCBkZXN0aW5hdGlvblxuICAgIHRoaXMuX3NvdXJjZXMgICAgID0gW107XG4gICAgdGhpcy5fZGVzdGluYXRpb24gPSAnJztcblxuICAgIC8vIG9yZGVyZWQgbGlzdCBvZiBmaWxlIHBhdHRlcm5zIHRvIGluY2x1ZGUvZXhjbHVkZVxuICAgIHRoaXMuX3BhdHRlcm5zID0gW107XG5cbiAgICAvLyBvcHRpb25zXG4gICAgdGhpcy5fb3B0aW9ucyA9IHt9O1xuXG4gICAgLy8gb3V0cHV0IGNhbGxiYWNrc1xuICAgIHRoaXMuX291dHB1dEhhbmRsZXJzID0ge1xuICAgICAgICBzdGRvdXQ6IG51bGwsXG4gICAgICAgIHN0ZGVycjogbnVsbFxuICAgIH07XG5cbiAgICB0aGlzLl9jd2QgPSBwcm9jZXNzLmN3ZCgpO1xuXG4gICAgLy8gQWxsb3cgY2hpbGRfcHJvY2Vzcy5zcGF3biBlbnYgb3ZlcnJpZGluZ1xuICAgIHRoaXMuX2VudiA9IHByb2Nlc3MuZW52O1xuXG4gICAgLy8gRGVidWcgcGFyYW1ldGVyXG4gICAgdGhpcy5fZGVidWcgPSBoYXNPUChjb25maWcsICdkZWJ1ZycpID8gY29uZmlnLmRlYnVnIDogZmFsc2U7XG59XG5cbi8qKlxuICogQnVpbGQgYSBuZXcgUnN5bmMgY29tbWFuZCBmcm9tIGFuIG9wdGlvbnMgT2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge1JzeW5jfVxuICovXG5Sc3luYy5idWlsZCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB2YXIgY29tbWFuZCA9IG5ldyBSc3luYygpO1xuXG4gICAgLy8gUHJvY2VzcyBhbGwgb3B0aW9uc1xuICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmIChoYXNPUChvcHRpb25zLCBrZXkpKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBvcHRpb25zW2tleV07XG5cbiAgICAgICAgICAgIC8vIE9ubHkgYWxsb3cgY2FsbGluZyBtZXRob2RzIG9uIHRoZSBSc3luYyBjb21tYW5kXG4gICAgICAgICAgICBpZiAodHlwZW9mKGNvbW1hbmRba2V5XSkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kW2tleV0odmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbW1hbmQ7XG59O1xuXG4vKipcbiAqIFNldCBhbiBvcHRpb24uXG4gKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9uXG4gKiBAcGFyYW0gbWl4ZWQgdmFsdWVcbiAqIEByZXR1cm4gUnN5bmNcbiAqL1xuUnN5bmMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG9wdGlvbiwgdmFsdWUpIHtcbiAgICBvcHRpb24gPSBzdHJpcExlYWRpbmdEYXNoZXMob3B0aW9uKTtcbiAgICBpZiAob3B0aW9uICYmIG9wdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnNbb3B0aW9uXSA9IHZhbHVlIHx8IG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBVbnNldCBhbiBvcHRpb24uXG4gKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9uXG4gKiBAcmV0dXJuIFJzeW5jXG4gKi9cblJzeW5jLnByb3RvdHlwZS51bnNldCA9IGZ1bmN0aW9uKG9wdGlvbikge1xuICAgIG9wdGlvbiA9IHN0cmlwTGVhZGluZ0Rhc2hlcyhvcHRpb24pO1xuXG4gICAgaWYgKG9wdGlvbiAmJiBPYmplY3Qua2V5cyh0aGlzLl9vcHRpb25zKS5pbmRleE9mKG9wdGlvbikgPj0gMCkge1xuICAgICAgICBkZWxldGUgdGhpcy5fb3B0aW9uc1tvcHRpb25dO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IG9yIHVuc2V0IG9uZSBvciBtb3JlIGZsYWdzLiBBIGZsYWcgaXMgYSBzaW5nbGUgbGV0dGVyIG9wdGlvbiB3aXRob3V0IGEgdmFsdWUuXG4gKlxuICogRmxhZ3MgY2FuIGJlIHByZXNlbnRlZCBhcyBhIHNpbmdsZSBTdHJpbmcsIGFuIEFycmF5IGNvbnRhaW5pbmcgU3RyaW5ncyBvciBhbiBPYmplY3RcbiAqIHdpdGggdGhlIGZsYWdzIGFzIGtleXMuXG4gKlxuICogV2hlbiBmbGFncyBhcmUgcHJlc2VudGVkIGFzIGEgU3RyaW5nIG9yIEFycmF5IHRoZSBzZXQgb3IgdW5zZXQgbWV0aG9kIHdpbGwgYmUgZGV0ZXJtaW5lZFxuICogYnkgdGhlIHNlY29uZCBwYXJhbWV0ZXIuXG4gKiBXaGVuIHRoZSBmbGFncyBhcmUgcHJlc2VudGVkIGFzIGFuIE9iamVjdCB0aGUgc2V0IG9yIHVuc2V0IG1ldGhvZCB3aWxsIGJlIGRldGVybWluZWQgYnlcbiAqIHRoZSB2YWx1ZSBjb3JyZXNwb25kaW5nIHRvIGVhY2ggZmxhZyBrZXkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8T2JqZWN0fSBmbGFnc1xuICogQHBhcmFtIHtCb29sZWFufSBzZXRcbiAqIEByZXR1cm4gUnN5bmNcbiAqL1xuUnN5bmMucHJvdG90eXBlLmZsYWdzID0gZnVuY3Rpb24oZmxhZ3MsIHNldCkge1xuICAgIC8vIERvIHNvbWUgYXJndW1lbnQgaGFuZGxpbmdcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgc2V0ID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRoZXJlIGFyZSBtb3JlIHRoYW4gMSBhcmd1bWVudHMsIGFzc3VtZSBmbGFncyBhcmUgcHJlc2VudGVkIGFzIHN0cmluZ3NcbiAgICAgICAgZmxhZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBsYXN0IGFyZ3VtZW50IGlzIGEgYm9vbGVhblxuICAgICAgICBpZiAodHlwZW9mKGZsYWdzW2ZsYWdzLmxlbmd0aCAtIDFdKSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBzZXQgPSBmbGFncy5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBKb2luIHRoZSByZW1haW5kZXIgb2YgdGhlIGFyZ3VtZW50cyB0byB0cmVhdCB0aGVtIGFzIGZsYWdzXG4gICAgICAgIGZsYWdzID0gZmxhZ3Muam9pbignJyk7XG4gICAgfVxuXG4gICAgLy8gU3BsaXQgbXVsdGlwbGUgZmxhZ3NcbiAgICBpZiAodHlwZW9mKGZsYWdzKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZmxhZ3MgPSBzdHJpcExlYWRpbmdEYXNoZXMoZmxhZ3MpLnNwbGl0KCcnKTtcbiAgICB9XG5cbiAgICAvLyBUdXJuIGFycmF5IGludG8gYW4gb2JqZWN0XG4gICAgaWYgKGlzQXJyYXkoZmxhZ3MpKSB7XG4gICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgZmxhZ3MuZm9yRWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICBvYmpbZl0gPSBzZXQ7XG4gICAgICAgIH0pO1xuICAgICAgICBmbGFncyA9IG9iajtcbiAgICB9XG5cbiAgICAvLyBzZXQvdW5zZXQgZWFjaCBmbGFnXG4gICAgZm9yICh2YXIga2V5IGluIGZsYWdzKSB7XG4gICAgICAgIGlmIChoYXNPUChmbGFncywga2V5KSkge1xuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IChmbGFnc1trZXldKSA/ICdzZXQnIDogJ3Vuc2V0JztcbiAgICAgICAgICAgIHRoaXNbbWV0aG9kXShzdHJpcExlYWRpbmdEYXNoZXMoa2V5KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gb3B0aW9uIGlzIHNldC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25cbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblJzeW5jLnByb3RvdHlwZS5pc1NldCA9IGZ1bmN0aW9uKG9wdGlvbikge1xuICAgIG9wdGlvbiA9IHN0cmlwTGVhZGluZ0Rhc2hlcyhvcHRpb24pO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9vcHRpb25zKS5pbmRleE9mKG9wdGlvbikgPj0gMDtcbn07XG5cbi8qKlxuICogR2V0IGFuIG9wdGlvbiBieSBuYW1lLlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4gbWl4ZWRcbiAqL1xuUnN5bmMucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBuYW1lID0gc3RyaXBMZWFkaW5nRGFzaGVzKG5hbWUpO1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zW25hbWVdO1xufTtcblxuLyoqXG4gKiBSZWdpc3RlciBhIGxpc3Qgb2YgZmlsZSBwYXR0ZXJucyB0byBpbmNsdWRlL2V4Y2x1ZGUgaW4gdGhlIHRyYW5zZmVyLiBQYXR0ZXJucyBjYW4gYmVcbiAqIHJlZ2lzdGVyZWQgYXMgYW4gYXJyYXkgb2YgU3RyaW5ncyBvciBPYmplY3RzLlxuICpcbiAqIFdoZW4gcmVnaXN0ZXJpbmcgYSBwYXR0ZXJuIGFzIGEgU3RyaW5nIGl0IG11c3QgYmUgcHJlZml4ZWQgd2l0aCBhIGArYCBvciBgLWAgc2lnbiB0b1xuICogc2lnbmFsIGluY2x1ZGUgb3IgZXhjbHVkZSBmb3IgdGhlIHBhdHRlcm4uIFRoZSBzaWduIHdpbGwgYmUgc3RyaXBwZWQgb2YgYW5kIHRoZVxuICogcGF0dGVybiB3aWxsIGJlIGFkZGVkIHRvIHRoZSBvcmRlcmVkIHBhdHRlcm4gbGlzdC5cbiAqXG4gKiBXaGVuIHJlZ2lzdGVyaW5nIHRoZSBwYXR0ZXJuIGFzIGFuIE9iamVjdCBpdCBtdXN0IGNvbnRhaW4gdGhlIGBhY3Rpb25gIGFuZFxuICogYHBhdHRlcm5gIGtleXMgd2hlcmUgYGFjdGlvbmAgY29udGFpbnMgdGhlIGArYCBvciBgLWAgc2lnbiBhbmQgdGhlIGBwYXR0ZXJuYFxuICoga2V5IGNvbnRhaW5zIHRoZSBmaWxlIHBhdHRlcm4sIHdpdGhvdXQgdGhlIGArYCBvciBgLWAgc2lnbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogICAvLyBvbiBhbiBleGlzdGluZyByc3luYyBvYmplY3RcbiAqICAgcnN5bmMucGF0dGVybnMoWyctZG9jcycsIHsgYWN0aW9uOiAnKycsIHBhdHRlcm46ICcvc3ViZGlyLyoucHknIH1dKTtcbiAqXG4gKiAgIC8vIHVzaW5nIFJzeW5jLmJ1aWxkIGZvciBhIG5ldyByc3luYyBvYmplY3RcbiAqICAgcnN5bmMgPSBSc3luYy5idWlsZCh7XG4gKiAgICAgLi4uXG4gKiAgICAgcGF0dGVybnM6IFsgJy1kb2NzJywgeyBhY3Rpb246ICcrJywgcGF0dGVybjogJy9zdWJkaXIvKi5weScgfV1cbiAqICAgICAuLi5cbiAqICAgfSlcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBwYXR0ZXJuc1xuICogQHJldHVybiBSc3luY1xuICovXG5Sc3luYy5wcm90b3R5cGUucGF0dGVybnMgPSBmdW5jdGlvbihwYXR0ZXJucykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBwYXR0ZXJucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgfVxuICAgIGlmICghaXNBcnJheShwYXR0ZXJucykpIHtcbiAgICAgICAgcGF0dGVybnMgPSBbIHBhdHRlcm5zIF07XG4gICAgfVxuXG4gICAgcGF0dGVybnMuZm9yRWFjaChmdW5jdGlvbihwYXR0ZXJuKSB7XG4gICAgICAgIHZhciBhY3Rpb24gPSAnPyc7XG4gICAgICAgIGlmICh0eXBlb2YocGF0dGVybikgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBhY3Rpb24gID0gcGF0dGVybi5jaGFyQXQoMCk7XG4gICAgICAgICAgICBwYXR0ZXJuID0gcGF0dGVybi5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICB0eXBlb2YocGF0dGVybikgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICBoYXNPUChwYXR0ZXJuLCAnYWN0aW9uJykgJiZcbiAgICAgICAgICAgIGhhc09QKHBhdHRlcm4sICdwYXR0ZXJuJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBhY3Rpb24gID0gcGF0dGVybi5hY3Rpb247XG4gICAgICAgICAgICBwYXR0ZXJuID0gcGF0dGVybi5wYXR0ZXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBhdHRlcm4gaXMgYW4gaW5jbHVkZSBvciBleGNsdWRlXG4gICAgICAgIGlmIChhY3Rpb24gPT09ICctJykge1xuICAgICAgICAgICAgdGhpcy5leGNsdWRlKHBhdHRlcm4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJysnKSB7XG4gICAgICAgICAgICB0aGlzLmluY2x1ZGUocGF0dGVybik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGF0dGVybjogJyArIHBhdHRlcm4pO1xuICAgICAgICB9XG4gICAgfSwgdGhpcyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRXhjbHVkZSBhIGZpbGUgcGF0dGVybiBmcm9tIHRyYW5zZmVyLiBUaGUgcGF0dGVybiB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSBvcmRlcmVkIGxpc3RcbiAqIG9mIHBhdHRlcm5zIGZvciB0aGUgcnN5bmMgY29tbWFuZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheX0gcGF0dGVybnNcbiAqIEByZXR1cm4gUnN5bmNcbiAqL1xuUnN5bmMucHJvdG90eXBlLmV4Y2x1ZGUgPSBmdW5jdGlvbihwYXR0ZXJucykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBwYXR0ZXJucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgfVxuICAgIGlmICghaXNBcnJheShwYXR0ZXJucykpIHtcbiAgICAgICAgcGF0dGVybnMgPSBbIHBhdHRlcm5zIF07XG4gICAgfVxuXG4gICAgcGF0dGVybnMuZm9yRWFjaChmdW5jdGlvbihwYXR0ZXJuKSB7XG4gICAgICAgIHRoaXMuX3BhdHRlcm5zLnB1c2goeyBhY3Rpb246ICAnLScsIHBhdHRlcm46IHBhdHRlcm4gfSk7XG4gICAgfSwgdGhpcyk7XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSW5jbHVkZSBhIGZpbGUgcGF0dGVybiBmb3IgdHJhbnNmZXIuIFRoZSBwYXR0ZXJuIHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIG9yZGVyZWQgbGlzdFxuICogb2YgcGF0dGVybnMgZm9yIHRoZSByc3luYyBjb21tYW5kLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSBwYXR0ZXJuc1xuICogQHJldHVybiBSc3luY1xuICovXG5Sc3luYy5wcm90b3R5cGUuaW5jbHVkZSA9IGZ1bmN0aW9uKHBhdHRlcm5zKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHBhdHRlcm5zID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICB9XG4gICAgaWYgKCFpc0FycmF5KHBhdHRlcm5zKSkge1xuICAgICAgICBwYXR0ZXJucyA9IFsgcGF0dGVybnMgXTtcbiAgICB9XG5cbiAgICBwYXR0ZXJucy5mb3JFYWNoKGZ1bmN0aW9uKHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy5fcGF0dGVybnMucHVzaCh7IGFjdGlvbjogICcrJywgcGF0dGVybjogcGF0dGVybiB9KTtcbiAgICB9LCB0aGlzKTtcblxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGNvbW1hbmQgdGhhdCBpcyBnb2luZyB0byBiZSBleGVjdXRlZC5cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuUnN5bmMucHJvdG90eXBlLmNvbW1hbmQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5leGVjdXRhYmxlKCkgKyAnICcgKyB0aGlzLmFyZ3MoKS5qb2luKCcgJyk7XG59O1xuXG4vKipcbiAqIFN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgUnN5bmMgY29tbWFuZC4gVGhpcyBpcyB0aGUgY29tbWFuZCB0aGF0IGlzXG4gKiBnb2luZyB0byBiZSBleGVjdXRlZCB3aGVuIGNhbGxpbmcgUnN5bmM6OmV4ZWN1dGUuXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblJzeW5jLnByb3RvdHlwZS50b1N0cmluZyA9IFJzeW5jLnByb3RvdHlwZS5jb21tYW5kO1xuXG4vKipcbiAqIEdldCB0aGUgYXJndW1lbnRzIGZvciB0aGUgcnN5bmMgY29tbWFuZC5cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5Sc3luYy5wcm90b3R5cGUuYXJncyA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEdhdGhlcmVkIGFyZ3VtZW50c1xuICAgIHZhciBhcmdzID0gW107XG5cbiAgICAvLyBBZGQgb3B0aW9ucy4gU2hvcnQgb3B0aW9ucyAob25lIGxldHRlcikgd2l0aG91dCB2YWx1ZXMgYXJlIGdhdGhlcmVkIHRvZ2V0aGVyLlxuICAgIC8vIExvbmcgb3B0aW9ucyBoYXZlIGEgdmFsdWUgYnV0IGNhbiBhbHNvIGJlIGEgc2luZ2xlIGxldHRlci5cbiAgICB2YXIgc2hvcnQgPSBbXTtcbiAgICB2YXIgbG9uZyAgPSBbXTtcblxuICAgIC8vIFNwbGl0IGxvbmcgYW5kIHNob3J0IG9wdGlvbnNcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fb3B0aW9ucykge1xuICAgICAgICBpZiAoaGFzT1AodGhpcy5fb3B0aW9ucywga2V5KSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fb3B0aW9uc1trZXldO1xuICAgICAgICAgICAgdmFyIG5vdmFsID0gKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBmb3Igc2hvcnQgb3B0aW9uIChzaW5nbGUgbGV0dGVyIHdpdGhvdXQgdmFsdWUpXG4gICAgICAgICAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSAmJiBub3ZhbCkge1xuICAgICAgICAgICAgICAgIHNob3J0LnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmcucHVzaChidWlsZE9wdGlvbihrZXksIHZhbCwgZXNjYXBlU2hlbGxBcmcpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb25nLnB1c2goYnVpbGRPcHRpb24oa2V5LCB2YWx1ZSwgZXNjYXBlU2hlbGxBcmcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBjb21iaW5lZCBzaG9ydCBvcHRpb25zIGlmIGFueSBhcmUgcHJlc2VudFxuICAgIGlmIChzaG9ydC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFyZ3MucHVzaCgnLScgKyBzaG9ydC5qb2luKCcnKSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGxvbmcgb3B0aW9ucyBpZiBhbnkgYXJlIHByZXNlbnRcbiAgICBpZiAobG9uZy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFyZ3MgPSBhcmdzLmNvbmNhdChsb25nKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgaW5jbHVkZXMvZXhjbHVkZXMgaW4gb3JkZXJcbiAgICB0aGlzLl9wYXR0ZXJucy5mb3JFYWNoKGZ1bmN0aW9uKGRlZikge1xuICAgICAgICBpZiAoZGVmLmFjdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgICAgICBhcmdzLnB1c2goYnVpbGRPcHRpb24oJ2V4Y2x1ZGUnLCBkZWYucGF0dGVybiwgZXNjYXBlRmlsZUFyZykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlZi5hY3Rpb24gPT09ICcrJykge1xuICAgICAgICAgICAgYXJncy5wdXNoKGJ1aWxkT3B0aW9uKCdpbmNsdWRlJywgZGVmLnBhdHRlcm4sIGVzY2FwZUZpbGVBcmcpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlYnVnKHRoaXMsICdVbmtub3duIHBhdHRlcm4gYWN0aW9uICcgKyBkZWYuYWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQWRkIHNvdXJjZXNcbiAgICBpZiAodGhpcy5zb3VyY2UoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFyZ3MgPSBhcmdzLmNvbmNhdCh0aGlzLnNvdXJjZSgpLm1hcChlc2NhcGVGaWxlQXJnKSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGRlc3RpbmF0aW9uXG4gICAgaWYgKHRoaXMuZGVzdGluYXRpb24oKSkge1xuICAgICAgICBhcmdzLnB1c2goZXNjYXBlRmlsZUFyZyh0aGlzLmRlc3RpbmF0aW9uKCkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJncztcbn07XG5cbi8qKlxuICogR2V0IGFuZCBzZXQgcnN5bmMgcHJvY2VzcyBjd2QgZGlyZWN0b3J5LlxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gY3dkPSBEaXJlY3RvcnkgcGF0aCByZWxhdGl2ZSB0byBjdXJyZW50IHByb2Nlc3MgZGlyZWN0b3J5LlxuICogQHJldHVybiB7c3RyaW5nfSBSZXR1cm4gY3VycmVudCBfY3dkLlxuICovXG5Sc3luYy5wcm90b3R5cGUuY3dkID0gZnVuY3Rpb24oY3dkKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY3dkICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEaXJlY3Rvcnkgc2hvdWxkIGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jd2QgPSBwYXRoLnJlc29sdmUoY3dkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY3dkO1xufTtcblxuLyoqXG4gKiBHZXQgYW5kIHNldCByc3luYyBwcm9jZXNzIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gZW52PSBFbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAqIEByZXR1cm4ge3N0cmluZ30gUmV0dXJuIGN1cnJlbnQgX2Vudi5cbiAqL1xuUnN5bmMucHJvdG90eXBlLmVudiA9IGZ1bmN0aW9uKGVudikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAodHlwZW9mIGVudiAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRW52aXJvbm1lbnQgc2hvdWxkIGJlIGFuIG9iamVjdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZW52ID0gZW52O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9lbnY7XG59O1xuXG4vKipcbiAqIFJlZ2lzdGVyIGFuIG91dHB1dCBoYW5kbGVycyBmb3IgdGhlIGNvbW1hbmRzIHN0ZG91dCBhbmQgc3RkZXJyIHN0cmVhbXMuXG4gKiBUaGVzZSBmdW5jdGlvbnMgd2lsbCBiZSBjYWxsZWQgb25jZSBkYXRhIGlzIHN0cmVhbWVkIG9uIG9uZSBvZiB0aGUgb3V0cHV0IGJ1ZmZlcnNcbiAqIHdoZW4gdGhlIGNvbW1hbmQgaXMgZXhlY3V0ZWQgdXNpbmcgYGV4ZWN1dGVgLlxuICpcbiAqIE9ubHkgb25lIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbiBiZSByZWdpc3RlcmVkIGZvciBlYWNoIG91dHB1dCBzdHJlYW0uIFByZXZpb3VzbHlcbiAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzIHdpbGwgYmUgb3ZlcnJpZGRlbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdGRvdXQgICAgIENhbGxiYWNrIEZ1bmN0aW9uIGZvciBzdGRvdXQgZGF0YVxuICogQHBhcmFtIHtGdW5jdGlvbn0gc3RkZXJyICAgICBDYWxsYmFjayBGdW5jdGlvbiBmb3Igc3RkZXJyIGRhdGFcbiAqIEByZXR1cm4gUnN5bmNcbiAqL1xuUnN5bmMucHJvdG90eXBlLm91dHB1dCA9IGZ1bmN0aW9uKHN0ZG91dCwgc3RkZXJyKSB7XG4gICAgLy8gQ2hlY2sgZm9yIHNpbmdsZSBhcmd1bWVudCBzbyB0aGUgbWV0aG9kIGNhbiBiZSB1c2VkIHdpdGggUnN5bmMuYnVpbGRcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBBcnJheS5pc0FycmF5KHN0ZG91dCkpIHtcbiAgICAgICAgc3RkZXJyID0gc3Rkb3V0WzFdO1xuICAgICAgICBzdGRvdXQgPSBzdGRvdXRbMF07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZihzdGRvdXQpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuX291dHB1dEhhbmRsZXJzLnN0ZG91dCA9IHN0ZG91dDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZihzdGRlcnIpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuX291dHB1dEhhbmRsZXJzLnN0ZGVyciA9IHN0ZG91dDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRXhlY3V0ZSB0aGUgcnN5bmMgY29tbWFuZC5cbiAqXG4gKiBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYW4gRXJyb3Igb2JqZWN0IChvciBudWxsIHdoZW4gdGhlcmUgd2FzIG5vbmUpLFxuICogdGhlIGV4aXQgY29kZSBmcm9tIHRoZSBleGVjdXRlZCBjb21tYW5kIGFuZCB0aGUgZXhlY3V0ZWQgY29tbWFuZCBhcyBhIFN0cmluZy5cbiAqXG4gKiBXaGVuIHN0ZG91dEhhbmRsZXIgYW5kIHN0ZGVyckhhbmRsZXIgZnVuY3Rpb25zIGFyZSBwcm92aWRlZCB0aGV5IHdpbGwgYmUgdXNlZCB0byBzdHJlYW1cbiAqIGRhdGEgZnJvbSBzdGRvdXQgYW5kIHN0ZGVyciBkaXJlY3RseSB3aXRob3V0IGJ1ZmZlcmluZy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAgICAgICBDYWxsZWQgd2hlbiByc3luYyBmaW5pc2hlcyAob3B0aW9uYWwpXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdGRvdXRIYW5kbGVyICBDYWxsZWQgb24gZWFjaCBjaHVuayByZWNlaXZlZCBmcm9tIHN0ZG91dCAob3B0aW9uYWwpXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdGRlcnJIYW5kbGVyICBDYWxsZWQgb24gZWFjaCBjaHVuayByZWNlaXZlZCBmcm9tIHN0ZGVyciAob3B0aW9uYWwpXG4gKi9cblJzeW5jLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24oY2FsbGJhY2ssIHN0ZG91dEhhbmRsZXIsIHN0ZGVyckhhbmRsZXIpIHtcbiAgICAvLyBSZWdpc3RlciBvdXRwdXQgaGFuZGxlcnNcbiAgICB0aGlzLm91dHB1dChzdGRvdXRIYW5kbGVyLCBzdGRlcnJIYW5kbGVyKTtcblxuICAgIC8vIEV4ZWN1dGUgdGhlIGNvbW1hbmQgYXMgYSBjaGlsZCBwcm9jZXNzXG4gICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9ibG9iLzkzN2UyZTM1MWIyNDUwY2YxZTljNGQ4YjNlMWE0ZTJhMmRlZjU4YmIvbGliL2NoaWxkX3Byb2Nlc3MuanMjTDU4OVxuICAgIHZhciBjbWRQcm9jO1xuICAgIGlmICgnd2luMzInID09PSBwcm9jZXNzLnBsYXRmb3JtKSB7XG4gICAgICAgIGNtZFByb2MgPSBzcGF3bignY21kLmV4ZScsIFsnL3MnLCAnL2MnLCAnXCInICsgdGhpcy5jb21tYW5kKCkgKyAnXCInXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgc3RkaW86ICdwaXBlJywgd2luZG93c1ZlcmJhdGltQXJndW1lbnRzOiB0cnVlLCBjd2Q6IHRoaXMuX2N3ZCwgZW52OiB0aGlzLl9lbnYgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjbWRQcm9jID0gc3Bhd24odGhpcy5fZXhlY3V0YWJsZVNoZWxsLCBbJy1jJywgdGhpcy5jb21tYW5kKCldLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdGRpbzogJ3BpcGUnLCBjd2Q6IHRoaXMuX2N3ZCwgZW52OiB0aGlzLl9lbnYgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2FwdHVyZSBzdGRvdXQgYW5kIHN0ZGVyciBpZiB0aGVyZSBhcmUgb3V0cHV0IGhhbmRsZXJzIGNvbmZpZ3VyZWRcbiAgICBpZiAodHlwZW9mKHRoaXMuX291dHB1dEhhbmRsZXJzLnN0ZG91dCkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY21kUHJvYy5zdGRvdXQub24oJ2RhdGEnLCB0aGlzLl9vdXRwdXRIYW5kbGVycy5zdGRvdXQpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mKHRoaXMuX291dHB1dEhhbmRsZXJzLnN0ZGVycikgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY21kUHJvYy5zdGRlcnIub24oJ2RhdGEnLCB0aGlzLl9vdXRwdXRIYW5kbGVycy5zdGRlcnIpO1xuICAgIH1cblxuICAgIC8vIFdhaXQgZm9yIHRoZSBjb21tYW5kIHRvIGZpbmlzaFxuICAgIGNtZFByb2Mub24oJ2Nsb3NlJywgZnVuY3Rpb24oY29kZSkge1xuICAgICAgICB2YXIgZXJyb3IgPSBudWxsO1xuXG4gICAgICAgIC8vIENoZWNrIHJzeW5jcyBlcnJvciBjb2RlXG4gICAgICAgIC8vIEBzZWUgaHR0cDovL2JsdWVib25lcy5uZXQvMjAwNy8wNi9yc3luYy1leGl0LWNvZGVzL1xuICAgICAgICBpZiAoY29kZSAhPT0gMCkge1xuICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ3JzeW5jIGV4aXRlZCB3aXRoIGNvZGUgJyArIGNvZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YoY2FsbGJhY2spID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgY29kZSwgdGhpcy5jb21tYW5kKCkpO1xuICAgICAgICB9XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIC8vIFJldHVybiB0aGUgY2hpbGQgcHJvY2VzcyBvYmplY3Qgc28gaXQgY2FuIGJlIGNsZWFuZWQgdXBcbiAgICAvLyBpZiB0aGUgcHJvY2VzcyBleGl0c1xuICAgIHJldHVybihjbWRQcm9jKTtcbn07XG5cbi8qKlxuICogR2V0IG9yIHNldCB0aGUgZGVidWcgcHJvcGVydHkuXG4gKlxuICogVGhlIHByb3BlcnR5IGlzIHNldCB0byB0aGUgYm9vbGVhbiBwcm92aWRlZCBzbyB1bnNldHRpbmcgdGhlIGRlYnVnXG4gKiBwcm9wZXJ0eSBoYXMgdG8gYmUgZG9uZSBieSBwYXNzaW5nIGZhbHNlIHRvIHRoaXMgbWV0aG9kLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgZGVidWdcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVidWcgdGhlIHZhbHVlIG9mIHRoZSBkZWJ1ZyBwcm9wZXJ0eSAob3B0aW9uYWwpXG4gKiBAcmV0dXJuIHtSc3luY3xCb29sZWFufVxuICovXG5jcmVhdGVWYWx1ZUFjY2Vzc29yKCdkZWJ1ZycpO1xuXG4vKipcbiAqIEdldCBvciBzZXQgdGhlIGV4ZWN1dGFibGUgdG8gdXNlIGZvciB0aGUgcnN5bmMgcHJvY2Vzcy5cbiAqXG4gKiBXaGVuIHNldHRpbmcgdGhlIGV4ZWN1dGFibGUgcGF0aCB0aGUgUnN5bmMgaW5zdGFuY2UgaXMgcmV0dXJuZWQgZm9yXG4gKiB0aGUgZmx1ZW50IGludGVyZmFjZS4gT3RoZXJ3aXNlIHRoZSBjb25maWd1cmVkIGV4ZWN1dGFibGUgcGF0aFxuICogaXMgcmV0dXJuZWQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBleGVjdXRhYmxlXG4gKiBAbWVtYmVyT2YgUnN5bmMucHJvdG90eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhlY3V0YWJsZSBwYXRoIHRvIHRoZSBleGVjdXRhYmxlIChvcHRpb25hbClcbiAqIEByZXR1cm4ge1JzeW5jfFN0cmluZ31cbiAqL1xuY3JlYXRlVmFsdWVBY2Nlc3NvcignZXhlY3V0YWJsZScpO1xuXG4vKipcbiAqIEdldCBvciBzZXQgdGhlIHNoZWxsIHRvIHVzZSBvbiBub24tV2luZG93cyAoVW5peCBvciBNYWMgT1MgWCkgc3lzdGVtcy5cbiAqXG4gKiBXaGVuIHNldHRpbmcgdGhlIHNoZWxsIHRoZSBSc3luYyBpbnN0YW5jZSBpcyByZXR1cm5lZCBmb3IgdGhlXG4gKiBmbHVlbnQgaW50ZXJmYWNlLiBPdGhlcndpc2UgdGhlIGNvbmZpZ3VyZWQgc2hlbGwgaXMgcmV0dXJuZWQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBleGVjdXRhYmxlU2hlbGxcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBzaGVsbCB0byB1c2Ugb24gbm9uLVdpbmRvd3Mgc3lzdGVtcyAob3B0aW9uYWwpXG4gKiBAcmV0dXJuIHtSc3luY3xTdHJpbmd9XG4gKi9cbmNyZWF0ZVZhbHVlQWNjZXNzb3IoJ2V4ZWN1dGFibGVTaGVsbCcpO1xuXG4vKipcbiAqIEdldCBvciBzZXQgdGhlIGRlc3RpbmF0aW9uIGZvciB0aGUgdHJhbnNmZXIuXG4gKlxuICogV2hlbiBzZXR0aW5nIHRoZSBkZXN0aW5hdGlvbiB0aGUgUnN5bmMgaW5zdGFuY2UgaXMgcmV0dXJuZWQgZm9yXG4gKiB0aGUgZmx1ZW50IGludGVyZmFjZS4gT3RoZXJ3aXNlIHRoZSBjb25maWd1cmVkIGRlc3RpbmF0aW9uIHBhdGhcbiAqIGlzIHJldHVybmVkLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgZGVzdGluYXRpb25cbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBkZXN0aW5hdGlvbiB0aGUgZGVzdGluYXRpb24gKG9wdGlvbmFsKVxuICogQHJldHVybiB7UnN5bmN8U3RyaW5nfVxuICovXG5jcmVhdGVWYWx1ZUFjY2Vzc29yKCdkZXN0aW5hdGlvbicpO1xuXG4vKipcbiAqIEFkZCBvbmUgb3IgbW9yZSBzb3VyY2VzIGZvciB0aGUgY29tbWFuZCBvciBnZXQgdGhlIGxpc3Qgb2YgY29uZmlndXJlZFxuICogc291cmNlcy5cbiAqXG4gKiBUaGUgc291cmNlcyBhcmUgYXBwZW5kZWQgdG8gdGhlIGxpc3Qgb2Yga25vd24gc291cmNlcyBpZiB0aGV5IHdlcmUgbm90XG4gKiBpbmNsdWRlZCB5ZXQgYW5kIHRoZSBSc3luYyBpbnN0YW5jZSBpcyByZXR1cm5lZCBmb3IgdGhlIGZsdWVudFxuICogaW50ZXJmYWNlLiBPdGhlcndpc2UgdGhlIGNvbmZpZ3VyZWQgbGlzdCBvZiBzb3VyY2UgaXMgcmV0dXJuZWQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBzb3VyY2VcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSBzb3VyY2VzIHRoZSBzb3VyY2Ugb3IgbGlzdCBvZiBzb3VyY2VzIHRvIGNvbmZpZ3VyZSAob3B0aW9uYWwpXG4gKiBAcmV0dXJuIHtSc3luY3xBcnJheX1cbiAqL1xuY3JlYXRlTGlzdEFjY2Vzc29yKCdzb3VyY2UnLCAnX3NvdXJjZXMnKTtcblxuLyoqXG4gKiBTZXQgdGhlIHNoZWxsIHRvIHVzZSB3aGVuIGxvZ2dpbmcgaW4gb24gYSByZW1vdGUgc2VydmVyLlxuICpcbiAqIFRoaXMgaXMgdGhlIHNhbWUgYXMgc2V0dGluZyB0aGUgYHJzaGAgb3B0aW9uLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgc2hlbGxcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBzaGVsbCB0aGUgc2hlbGwgb3B0aW9uIHRvIHVzZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZUxvbmdPcHRpb24oJ3JzaCcsICdzaGVsbCcpO1xuXG4vKipcbiAqIEFkZCBhIGNobW9kIGluc3RydWN0aW9uIHRvIHRoZSBjb21tYW5kLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgY2htb2RcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fVxuICogQHJldHVybiB7UnN5bmN8QXJyYXl9XG4gKi9cbmV4cG9zZU11bHRpT3B0aW9uKCdjaG1vZCcsICdjaG1vZCcpO1xuXG4vKipcbiAqIFNldCB0aGUgZGVsZXRlIGZsYWcuXG4gKlxuICogVGhpcyBpcyB0aGUgc2FtZSBhcyBzZXR0aW5nIHRoZSBgLS1kZWxldGVgIGNvbW1hbmRsaW5lIGZsYWcuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEByZXR1cm4ge1JzeW5jfVxuICovXG5leHBvc2VTaG9ydE9wdGlvbignZGVsZXRlJyk7XG5cbi8qKlxuICogU2V0IHRoZSBwcm9ncmVzcyBmbGFnLlxuICpcbiAqIFRoaXMgaXMgdGhlIHNhbWUgYXMgc2V0dGluZyB0aGUgYC0tcHJvZ3Jlc3NgIGNvbW1hbmRsaW5lIGZsYWcuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBwcm9ncmVzc1xuICogQG1lbWJlck9mIFJzeW5jLnByb3RvdHlwZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZVNob3J0T3B0aW9uKCdwcm9ncmVzcycpO1xuXG4vKipcbiAqIFNldCB0aGUgYXJjaGl2ZSBmbGFnLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgYXJjaGl2ZVxuICogQG1lbWJlck9mIFJzeW5jLnByb3RvdHlwZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZVNob3J0T3B0aW9uKCdhJywgJ2FyY2hpdmUnKTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvbXByZXNzIGZsYWcuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBjb21wcmVzc1xuICogQG1lbWJlck9mIFJzeW5jLnByb3RvdHlwZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZVNob3J0T3B0aW9uKCd6JywgJ2NvbXByZXNzJyk7XG5cbi8qKlxuICogU2V0IHRoZSByZWN1cnNpdmUgZmxhZy5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lIHJlY3Vyc2l2ZVxuICogQG1lbWJlck9mIFJzeW5jLnByb3RvdHlwZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZVNob3J0T3B0aW9uKCdyJywgJ3JlY3Vyc2l2ZScpO1xuXG4vKipcbiAqIFNldCB0aGUgdXBkYXRlIGZsYWcuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSB1cGRhdGVcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEByZXR1cm4ge1JzeW5jfVxuICovXG5leHBvc2VTaG9ydE9wdGlvbigndScsICd1cGRhdGUnKTtcblxuLyoqXG4gKiBTZXQgdGhlIHF1aWV0IGZsYWcuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBxdWlldFxuICogQG1lbWJlck9mIFJzeW5jLnByb3RvdHlwZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZVNob3J0T3B0aW9uKCdxJywgJ3F1aWV0Jyk7XG5cbi8qKlxuICogU2V0IHRoZSBkaXJzIGZsYWcuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBkaXJzXG4gKiBAbWVtYmVyT2YgUnN5bmMucHJvdG90eXBlXG4gKiBAcmV0dXJuIHtSc3luY31cbiAqL1xuZXhwb3NlU2hvcnRPcHRpb24oJ2QnLCAnZGlycycpO1xuXG4vKipcbiAqIFNldCB0aGUgbGlua3MgZmxhZy5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lIGxpbmtzXG4gKiBAbWVtYmVyT2YgUnN5bmMucHJvdG90eXBlXG4gKiBAcmV0dXJuIHtSc3luY31cbiAqL1xuZXhwb3NlU2hvcnRPcHRpb24oJ2wnLCAnbGlua3MnKTtcblxuLyoqXG4gKiBTZXQgdGhlIGRyeSBmbGFnLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgZHJ5XG4gKiBAbWVtYmVyT2YgUnN5bmMucHJvdG90eXBlXG4gKiBAcmV0dXJuIHtSc3luY31cbiAqL1xuZXhwb3NlU2hvcnRPcHRpb24oJ24nLCAnZHJ5Jyk7XG5cbi8qKlxuICogU2V0IHRoZSBoYXJkIGxpbmtzIGZsYWcgcHJlc2VydmluZyBoYXJkIGxpbmtzIGZvciB0aGUgZmlsZXMgdHJhbnNtaXR0ZWQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBoYXJkTGlua3NcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEByZXR1cm4ge1JzeW5jfVxuICovXG5leHBvc2VTaG9ydE9wdGlvbignSCcsICdoYXJkTGlua3MnKTtcblxuLyoqXG4gKiBTZXQgdGhlIHBlcm1zIGZsYWcuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBwZXJtc1xuICogQG1lbWJlck9mIFJzeW5jLnByb3RvdHlwZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZVNob3J0T3B0aW9uKCdwJywgJ3Blcm1zJyk7XG5cbi8qKlxuICogU2V0IHRoZSBleGVjdXRhYmlsaXR5IGZsYWcgdG8gcHJlc2VydmUgZXhlY3V0YWJpbGl0eSBmb3IgdGhlIGZpbGVzXG4gKiB0cmFuc21pdHRlZC5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lIGV4ZWN1dGFiaWxpdHlcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEByZXR1cm4ge1JzeW5jfVxuICovXG5leHBvc2VTaG9ydE9wdGlvbignRScsICdleGVjdXRhYmlsaXR5Jyk7XG5cbi8qKlxuICogU2V0IHRoZSBncm91cCBmbGFnIHRvIHByZXNlcnZlIHRoZSBncm91cCBwZXJtaXNzaW9ucyBvZiB0aGUgZmlsZXNcbiAqIHRyYW5zbWl0dGVkLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgZ3JvdXBcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEByZXR1cm4ge1JzeW5jfVxuICovXG5leHBvc2VTaG9ydE9wdGlvbignZycsICdncm91cCcpO1xuXG4vKipcbiAqIFNldCB0aGUgb3duZXIgZmxhZyB0byBwcmVzZXJ2ZSB0aGUgb3duZXIgb2YgdGhlIGZpbGVzIHRyYW5zbWl0dGVkLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgb3duZXJcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEByZXR1cm4ge1JzeW5jfVxuICovXG5leHBvc2VTaG9ydE9wdGlvbignbycsICdvd25lcicpO1xuXG4vKipcbiAqIFNldCB0aGUgYWNscyBmbGFnIHRvIHByZXNlcnZlIHRoZSBBQ0xzIGZvciB0aGUgZmlsZXMgdHJhbnNtaXR0ZWQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBhY2xzXG4gKiBAbWVtYmVyT2YgUnN5bmMucHJvdG90eXBlXG4gKiBAcmV0dXJuIHtSc3luY31cbiAqL1xuZXhwb3NlU2hvcnRPcHRpb24oJ0EnLCAnYWNscycpO1xuXG4vKipcbiAqIFNldCB0aGUgeGF0dHJzIGZsYWcgdG8gcHJlc2VydmUgdGhlIGV4dGVuZGVkIGF0dHJpYnV0ZXMgZm9yIHRoZSBmaWxlc1xuICogdHJhbnNtaXR0ZWQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSB4YXR0cnNcbiAqIEBtZW1iZXJPZiBSc3luYy5wcm90b3R5cGVcbiAqIEByZXR1cm4ge1JzeW5jfVxuICovXG5leHBvc2VTaG9ydE9wdGlvbignWCcsICd4YXR0cnMnKTtcblxuLyoqXG4gKiBTZXQgdGhlIGRldmljZXMgZmxhZyB0byBwcmVzZXJ2ZSBkZXZpY2UgZmlsZXMgaW4gdGhlIHRyYW5zZmVyLlxuICpcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgZGV2aWNlc1xuICogQG1lbWJlck9mIFJzeW5jLnByb3RvdHlwZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZVNob3J0T3B0aW9uKCdkZXZpY2VzJyk7XG5cbi8qKlxuICogU2V0IHRoZSBzcGVjaWFscyBmbGFnIHRvIHByZXNlcnZlIHNwZWNpYWwgZmlsZXMuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBzcGVjaWFsc1xuICogQG1lbWJlck9mIFJzeW5jLnByb3RvdHlwZVxuICogQHJldHVybiB7UnN5bmN9XG4gKi9cbmV4cG9zZVNob3J0T3B0aW9uKCdzcGVjaWFscycpO1xuXG4vKipcbiAqIFNldCB0aGUgdGltZXMgZmxhZyB0byBwcmVzZXJ2ZSB0aW1lcyBmb3IgdGhlIGZpbGVzIGluIHRoZSB0cmFuc2Zlci5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lIHRpbWVzXG4gKiBAbWVtYmVyT2YgUnN5bmMucHJvdG90eXBlXG4gKiBAcmV0dXJuIHtSc3luY31cbiAqL1xuZXhwb3NlU2hvcnRPcHRpb24oJ3QnLCAndGltZXMnKTtcblxuLy8gb3VyIGF3ZXNvbWUgZXhwb3J0IHByb2R1Y3Rcbm1vZHVsZS5leHBvcnRzID0gUnN5bmM7XG5cbi8qICoqKiogKi9cblxuLyoqXG4gKiBDcmVhdGUgYSBjaGFpbmFibGUgZnVuY3Rpb24gb24gdGhlIFJzeW5jIHByb3RvdHlwZSBmb3IgZ2V0dGluZyBhbmQgc2V0dGluZyBhblxuICogaW50ZXJuYWwgdmFsdWUuXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVZhbHVlQWNjZXNzb3IobmFtZSwgaW50ZXJuYWwpIHtcbiAgICB2YXIgY29udGFpbmVyID0gaW50ZXJuYWwgfHwgJ18nICsgbmFtZTtcblxuICAgIFJzeW5jLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXNbY29udGFpbmVyXTtcbiAgICAgICAgdGhpc1tjb250YWluZXJdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBjcmVhdGVMaXN0QWNjZXNzb3IobmFtZSwgaW50ZXJuYWwpIHtcbiAgICB2YXIgY29udGFpbmVyID0gaW50ZXJuYWwgfHwgJ18nICsgbmFtZTtcblxuICAgIFJzeW5jLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXNbY29udGFpbmVyXTtcblxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2godGhpc1tuYW1lXSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mKHZhbHVlKSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmFsdWUgZm9yIFJzeW5jOjonICsgbmFtZSArICcgbXVzdCBiZSBhIFN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXNbY29udGFpbmVyXS5pbmRleE9mKHZhbHVlKSA8IDApIHtcbiAgICAgICAgICAgIHRoaXNbY29udGFpbmVyXS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgc2hvcnRoYW5kIG1ldGhvZCBvbiB0aGUgUnN5bmMgcHJvdG90eXBlIGZvciBzZXR0aW5nIGFuZCB1bnNldHRpbmcgYSBzaW1wbGUgb3B0aW9uLlxuICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqL1xuZnVuY3Rpb24gZXhwb3NlU2hvcnRPcHRpb24ob3B0aW9uLCBuYW1lKSB7XG4gICAgbmFtZSA9IG5hbWUgfHwgb3B0aW9uO1xuXG4gICAgUnN5bmMucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oc2V0KSB7XG4gICAgICAgIC8vIFdoZW4gbm8gYXJndW1lbnRzIGFyZSBwYXNzZWQgaW4gYXNzdW1lIHRoZSBvcHRpb25cbiAgICAgICAgLy8gbmVlZHMgdG8gYmUgc2V0XG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgc2V0ID0gdHJ1ZTtcblxuICAgICAgICB2YXIgbWV0aG9kID0gKHNldCkgPyAnc2V0JyA6ICd1bnNldCc7XG4gICAgICAgIHJldHVybiB0aGlzW21ldGhvZF0ob3B0aW9uKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZ1bmN0aW9uIGZvciBhbiBvcHRpb24gdGhhdCBjYW4gYmUgc2V0IG11bHRpcGxlIHRpbWUuIFRoZSBvcHRpb25cbiAqIHdpbGwgYWNjdW11bGF0ZSBhbGwgdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25cbiAqIEBwYXJhbSB7W1N0cmluZ119IG5hbWVcbiAqL1xuZnVuY3Rpb24gZXhwb3NlTXVsdGlPcHRpb24ob3B0aW9uLCBuYW1lKSB7XG4gICAgbmFtZSA9IG5hbWUgfHwgb3B0aW9uO1xuXG4gICAgUnN5bmMucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gV2hlbiBub3QgYXJndW1lbnRzIGFyZSBwYXNzZWQgaW4gYXNzdW1lIHRoZSBvcHRpb25zXG4gICAgICAgIC8vIGN1cnJlbnQgdmFsdWUgaXMgcmVxdWVzdGVkXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIHRoaXMub3B0aW9uKG9wdGlvbik7XG5cbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgLy8gVW5zZXQgdGhlIG9wdGlvbiBvbiBmYWxzeVxuICAgICAgICAgICAgdGhpcy51bnNldChvcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAvLyBDYWxsIHRoaXMgbWV0aG9kIGZvciBlYWNoIGFycmF5IHZhbHVlXG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKHRoaXNbbmFtZV0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQWRkIHRoZSB2YWx1ZVxuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLm9wdGlvbihvcHRpb24pO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBbIHZhbHVlIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaXNBcnJheShjdXJyZW50KSkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IFsgY3VycmVudCwgdmFsdWUgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gY3VycmVudC5jb25jYXQodmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldChvcHRpb24sIHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG59XG5cbi8qKlxuICogRXhwb3NlIGFuIHJzeW5jIGxvbmcgb3B0aW9uIG9uIHRoZSBSc3luYyBwcm90b3R5cGUuXG4gKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9uICAgVGhlIG9wdGlvbiB0byBleHBvc2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lICAgICBBbiBvcHRpb25hbCBhbHRlcm5hdGl2ZSBuYW1lIGZvciB0aGUgb3B0aW9uLlxuICovXG5mdW5jdGlvbiBleHBvc2VMb25nT3B0aW9uKG9wdGlvbiwgbmFtZSkge1xuICAgIG5hbWUgPSBuYW1lIHx8IG9wdGlvbjtcblxuICAgIFJzeW5jLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIFdoZW4gbm90IGFyZ3VtZW50cyBhcmUgcGFzc2VkIGluIGFzc3VtZSB0aGUgb3B0aW9uc1xuICAgICAgICAvLyBjdXJyZW50IHZhbHVlIGlzIHJlcXVlc3RlZFxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzLm9wdGlvbihvcHRpb24pO1xuXG4gICAgICAgIHZhciBtZXRob2QgPSAodmFsdWUpID8gJ3NldCcgOiAndW5zZXQnO1xuICAgICAgICByZXR1cm4gdGhpc1ttZXRob2RdKG9wdGlvbiwgdmFsdWUpO1xuICAgIH07XG59XG5cbi8qKlxuICogQnVpbGQgYW4gb3B0aW9uIGZvciB1c2UgaW4gYSBzaGVsbCBjb21tYW5kLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb258Ym9vbGVhbn0gZXNjYXBlQXJnXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGJ1aWxkT3B0aW9uKG5hbWUsIHZhbHVlLCBlc2NhcGVBcmcpIHtcbiAgICBpZiAodHlwZW9mIGVzY2FwZUFyZyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGVzY2FwZUFyZyA9ICghZXNjYXBlQXJnKSA/IG5vb3AgOiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZXNjYXBlQXJnICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGVzY2FwZUFyZyA9IGVzY2FwZVNoZWxsQXJnO1xuICAgIH1cblxuICAgIC8vIERldGVjdCBzaW5nbGUgb3B0aW9uIGtleVxuICAgIHZhciBzaW5nbGUgPSAobmFtZS5sZW5ndGggPT09IDEpID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgLy8gRGVjaWRlIG9uIHByZWZpeCBhbmQgdmFsdWUgZ2x1ZVxuICAgIHZhciBwcmVmaXggPSAoc2luZ2xlKSA/ICctJyA6ICctLSc7XG4gICAgdmFyIGdsdWUgICA9IChzaW5nbGUpID8gJyAnIDogJz0nO1xuXG4gICAgLy8gQnVpbGQgdGhlIG9wdGlvblxuICAgIHZhciBvcHRpb24gPSBwcmVmaXggKyBuYW1lO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB2YWx1ZSkge1xuICAgICAgICB2YWx1ZSAgID0gZXNjYXBlQXJnKFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICBvcHRpb24gKz0gZ2x1ZSArIHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBvcHRpb247XG59XG5cbi8qKlxuICogRXNjYXBlIGFuIGFyZ3VtZW50IGZvciB1c2UgaW4gYSBzaGVsbCBjb21tYW5kIHdoZW4gbmVjZXNzYXJ5LlxuICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVTaGVsbEFyZyhhcmcpIHtcbiAgaWYgKCEvKFtcIidgXFxcXCQgXSkvLnRlc3QoYXJnKSkge1xuICAgIHJldHVybiBhcmc7XG4gIH1cbiAgcmV0dXJuICdcIicgKyBhcmcucmVwbGFjZSgvKFtcIidgXFxcXCRdKS9nLCAnXFxcXCQxJykgKyAnXCInO1xufVxuXG4vKipcbiAqIEVzY2FwZSBhIGZpbGVuYW1lIGZvciB1c2UgaW4gYSBzaGVsbCBjb21tYW5kLlxuICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lIHRoZSBmaWxlbmFtZSB0byBlc2NhcGVcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGVzY2FwZWQgdmVyc2lvbiBvZiB0aGUgZmlsZW5hbWVcbiAqL1xuZnVuY3Rpb24gZXNjYXBlRmlsZUFyZyhmaWxlbmFtZSkge1xuICBmaWxlbmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoLyhbXCInYFxcc1xcXFxcXChcXClcXFxcJF0pL2csJ1xcXFwkMScpO1xuICBpZiAoIS8oXFxcXFxcXFwpLy50ZXN0KGZpbGVuYW1lKSkge1xuICAgIHJldHVybiBmaWxlbmFtZTtcbiAgfVxuICAvLyBVbmRlciBXaW5kb3dzIHJzeW5jICh3aXRoIGN5Z3dpbikgYW5kIE9wZW5TU0ggZm9yIFdpbmRvd3NcbiAgLy8gKGh0dHA6Ly93d3cubWxzLXNvZnR3YXJlLmNvbS9vcGVuc3NoZC5odG1sKSBhcmUgdXNpbmcgXG4gIC8vIHN0YW5kYXJkIGxpbnV4IGRpcmVjdG9yeSBzZXBhcmF0b3Igc28gbmVlZCB0byByZXBsYWNlIGl0XG4gIGlmICgnd2luMzInID09PSBwcm9jZXNzLnBsYXRmb3JtKSB7XG4gICAgZmlsZW5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKC9cXFxcXFxcXC9nLCcvJykucmVwbGFjZSgvXltcIl0/W0EtWl1cXDpcXC8vaWcsJy8nKTtcbiAgfVxuICByZXR1cm4gZmlsZW5hbWU7XG59XG5cbi8qKlxuICogU3RyaXAgdGhlIGxlYWRpbmcgZGFzaGVzIGZyb20gYSB2YWx1ZS5cbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBzdHJpcExlYWRpbmdEYXNoZXModmFsdWUpIHtcbiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eW1xcLV0qLywgJycpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXkuIFdpbGwgdXNlIHRoZSBuYXRpdmVcbiAqIEFycmF5LmlzQXJyYXkgbWV0aG9kIGlmIGF2YWlsYWJsZS5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YoQXJyYXkuaXNBcnJheSkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxufVxuXG4vKipcbiAqIFNpbXBsZSBoYXNPd25Qcm9wZXJ0eSB3cmFwcGVyLiBUaGlzIHdpbGwgY2FsbCBoYXNPd25Qcm9wZXJ0eSBvbiB0aGUgb2JqXG4gKiB0aHJvdWdoIHRoZSBPYmplY3QgcHJvdG90eXBlLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogIFRoZSBvYmplY3QgdG8gY2hlY2sgdGhlIHByb3BlcnR5IG9uXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5ICBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gY2hlY2tcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGhhc09QKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKipcbiAqIFNpbXBsZSBkZWJ1ZyBwcmludGVyLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1JzeW5jfSBjbWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlXG4gKi9cbmZ1bmN0aW9uIGRlYnVnKGNtZCwgbWVzc2FnZSkge1xuICAgIGlmICghY21kLl9kZWJ1ZykgcmV0dXJuO1xufVxuIiwgImltcG9ydCB7IEFwcCwgRWRpdG9yLCBNYXJrZG93blZpZXcsIE1vZGFsLCBOb3RpY2UsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxudmFyIFJzeW5jID0gcmVxdWlyZSgncnN5bmMnKVxyXG5cclxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXHJcblxyXG5pbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XHJcblx0a2V5UGF0aDogc3RyaW5nO1xyXG5cdHJlbW90ZVVybDogc3RyaW5nO1xyXG5cdHJlbW90ZVBhdGg6IHN0cmluZztcclxuXHRjeWd3aW5QYXRoOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0a2V5UGF0aDogJycsXHJcblx0cmVtb3RlVXJsOiAnJyxcclxuXHRyZW1vdGVQYXRoOiAnJyxcclxuXHRjeWd3aW5QYXRoOiAnRjovY3lnd2luL2Jpbi9iYXNoLmV4ZSdcclxuXHRcclxufVxyXG5cclxuLy9QUk9CQUJMWSBzaG91bGQgZXhjbHVkZSB0aGUgcGx1Z2lucyBmb2xkZXIgaW4gb3VyIC5vYnNpZGlhblxyXG4vL0FsdGhvdWdoIGlka1xyXG5mdW5jdGlvbiByc3luY3dyYXBwZXIoc291cmNlOiBzdHJpbmcsIGRlc3Q6IHN0cmluZywgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MpIHtcclxuXHJcblx0Ly9jb25zb2xlLmxvZyhcIlN5bmNpbmcuLi5cXG5bU291cmNlOiBcIitzb3VyY2UrXCJdXFxuW0Rlc3Q6IFwiK2Rlc3QrXCJdXCIpO1xyXG5cdFxyXG5cdFxyXG5cdHZhciByc3luYyA9IG5ldyBSc3luYygpXHJcblx0XHQuZmxhZ3MoXCJycXVcIilcclxuXHRcdC5leGVjdXRhYmxlKHNldHRpbmdzLmN5Z3dpblBhdGgrXCIgLWxjICdyc3luY1wiKVxyXG5cdFx0LnNldChcInJzaFwiLCBcInNzaCAtaSBcIitzZXR0aW5ncy5rZXlQYXRoKVxyXG5cdFx0LnNldChcInNpemUtb25seVwiKVxyXG5cdFx0LnNldChcImV4Y2x1ZGVcIiwgXCIqcGx1Z2luc1wiKSAvL0Z1Y2sgcGx1Z2lucyBicm9cclxuXHRcdC5zb3VyY2Uoc291cmNlKVxyXG5cdFx0LmRlc3RpbmF0aW9uKGRlc3QpXHJcblxyXG5cdC8vUXVpY2sgdmFsaWRhdGlvblxyXG5cdHZhciBwYXNzID0gXCJ0cnVlXCIgLy9Mb2xcclxuXHRpZihzZXR0aW5ncy5rZXlQYXRoID09IFwiXCIpXHJcblx0XHRwYXNzID0gXCJObyBrZXlcIlxyXG5cdFxyXG5cdGNvbnNvbGUubG9nKHJzeW5jLmNvbW1hbmQoKSlcclxuXHJcblx0aWYocGFzcyA9PT0gXCJ0cnVlXCIpXHJcblx0XHRyc3luYy5leGVjdXRlKGZ1bmN0aW9uKGVycm9yLCBjb2RlLCBjbWQpIHtcclxuXHRcdFx0aWYoZXJyb3IgPT0gbnVsbClcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkRvbmUhXCIpO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG5cdFx0fSk7XHJcblx0ZWxzZVxyXG5cdFx0Y29uc29sZS5sb2coXCJTeW5jIGZhaWxlZCEgXFxcIlwiK3Bhc3MrXCJcXFwiXCIpXHJcblx0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJzeW5jZGVsZXRlKGxvY2FsUGF0aDogc3RyaW5nLCBmaWxlUGF0aDogc3RyaW5nLCBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncywgdmF1bHROYW1lOiBzdHJpbmcpIHtcclxuXHRsb2NhbFBhdGggPSBcIi9jeWdkcml2ZS9jL1wiK2xvY2FsUGF0aDtcclxuXHRjb25zdCBmaWxlTmFtZSA9IGZpbGVQYXRoLnNwbGl0KFwiL1wiKS5sYXN0KClcclxuXHRmaWxlUGF0aCA9IGZpbGVQYXRoLnNsaWNlKDAsIC1maWxlTmFtZS5sZW5ndGgpXHJcblx0dmFyIHJzeW5jID0gbmV3IFJzeW5jKClcclxuXHRcdC5mbGFncyhcInJcIilcclxuXHRcdC5leGVjdXRhYmxlKHNldHRpbmdzLmN5Z3dpblBhdGgrXCIgLWxjICdyc3luY1wiKVxyXG5cdFx0LnNldChcInJzaFwiLCBcInNzaCAtaSBcIitzZXR0aW5ncy5rZXlQYXRoKVxyXG5cdFx0LnNldChcImRlbGV0ZVwiKVxyXG5cdFx0LnNldChcImluY2x1ZGVcIiwgZmlsZU5hbWUpXHJcblx0XHQuc2V0KFwiZXhjbHVkZVwiLCBcIipcIilcclxuXHRcdC5zb3VyY2UobG9jYWxQYXRoK3ZhdWx0TmFtZStcIi8ub2JzaWRpYW4vXCIpIC8vQSBkaXJlY3Rvcnkgbm90IGNvbnRhaW5pbmcgdGhlIGZpbGUgd2UncmUgZGVsZXRpbmcgaXMgbmVlZGVkLiBUaGFuayBnb2QgZm9yIHRoaXMgb25lLlxyXG5cdFx0LmRlc3RpbmF0aW9uKHNldHRpbmdzLnJlbW90ZVVybCtcIjpcIitzZXR0aW5ncy5yZW1vdGVQYXRoK3ZhdWx0TmFtZStcIi9cIitmaWxlUGF0aClcclxuXHJcblx0Ly9RdWljayB2YWxpZGF0aW9uXHJcblx0dmFyIHBhc3MgPSBcInRydWVcIiAvL0xvbFxyXG5cdGlmKHNldHRpbmdzLmtleVBhdGggPT0gXCJcIilcclxuXHRcdHBhc3MgPSBcIk5vIGtleVwiXHJcblx0XHJcblx0Y29uc29sZS5sb2cocnN5bmMuY29tbWFuZCgpKVxyXG5cdHJzeW5jLm91dHB1dChcclxuXHRcdGZ1bmN0aW9uKGRhdGEpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyhkYXRhKVxyXG5cdFx0fSwgZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkVSUk9SISFcIilcclxuXHRcdFx0Y29uc29sZS5sb2coZGF0YSlcclxuXHRcdH1cclxuXHQpO1xyXG5cdGlmKHBhc3MgPT09IFwidHJ1ZVwiKVxyXG5cdFx0cnN5bmMuZXhlY3V0ZShmdW5jdGlvbihlcnJvciwgY29kZSwgY21kKSB7XHJcblx0XHRcdGlmKGVycm9yID09IG51bGwpIHtcclxuXHRcdFx0XHRyc3luY3dyYXBwZXIobG9jYWxQYXRoK3ZhdWx0TmFtZSwgc2V0dGluZ3MucmVtb3RlVXJsK1wiOlwiK3NldHRpbmdzLnJlbW90ZVBhdGgsIHNldHRpbmdzKVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0XHR9KTtcclxuXHRlbHNlXHJcblx0XHRjb25zb2xlLmxvZyhcIlN5bmMgZmFpbGVkISBcXFwiXCIrcGFzcytcIlxcXCJcIilcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuXHRcdC8vXCJHbG9iYWxzXCJcclxuXHRcdGNvbnN0IGRlYnVnID0gZmFsc2U7XHJcblx0XHRjb25zdCB2YXVsdE5hbWUgPSB0aGlzLmFwcC52YXVsdC5nZXROYW1lKCk7XHJcblx0XHRjb25zdCBrZXlQYXRoID0gdGhpcy5zZXR0aW5ncy5rZXlQYXRoOy8vXCIvY3lnZHJpdmUvYy9Vc2Vycy9iYWtlci8uc3NoL2lkX3JzYVwiO1xyXG5cdFx0Y29uc3QgcmVtb3RlID0gdGhpcy5zZXR0aW5ncy5yZW1vdGVVcmwrXCI6XCIrdGhpcy5zZXR0aW5ncy5yZW1vdGVQYXRoO1xyXG5cdFx0Ly9UT0RPIG1ha2UgaXQgc28gd2UgZGV0ZWN0IGlmIG9uIFdpbmRvd3MgdG8gcHJlcGVuZCB0aGUgY3lnZHJpdmUgYnNcclxuXHRcdGNvbnN0IGxvY2FsID0gXCIvY3lnZHJpdmUvYy9cIit0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmJhc2VQYXRoLnNsaWNlKDMsIC12YXVsdE5hbWUubGVuZ3RoKTtcclxuXHRcdGNvbnN0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5nc1xyXG5cdFx0dmFyIGFwcCA9IHRoaXMuYXBwXHJcblxyXG5cclxuXHRcdC8vT24gbG9hZCwgd2Ugc2hvdWxkIHN5bmMgZnJvbSBzZXJ2ZXIgdG8gbG9jYWwuXHJcblx0XHQvL3JzeW5jd3JhcHBlcihyZW1vdGUrdmF1bHROYW1lLCBsb2NhbCwgdGhpcy5zZXR0aW5ncyk7XHJcblx0XHRcclxuXHRcdC8vU2hvdWxkIHdlIHRoZW4gc3luYyB0aGUgb3RoZXIgd2F5IHRvIG1vdmUgZmlsZXMgdGhhdCBhcmUgc29tZWhvdyBuZXdlciBvdmVyPyBTaG91bGRuJ3QgaGFwcGVuIGJ1dCBpdCBkb2VzIGluIGRldmVsb3BtZW50IGxvbFxyXG5cclxuXHRcdFxyXG5cdFx0Ly9Mb2NhbCB0byBzZXJ2ZXJcclxuXHRcdC8vcnN5bmN3cmFwcGVyKGtleVBhdGgsIGxvY2FsK3ZhdWx0TmFtZSwgcmVtb3RlKVxyXG5cclxuXHJcblxyXG5cdFx0Ly9OZXcgVmF1bHQgY3JlYXRlZCwgc2VlIGlmIGl0IGV4aXN0cyBvbiByZW1vdGUgYW5kIGlmIG5vdCBwdXQgaXQgdGhlcmUuXHJcblx0XHQvL0lmIGl0IGRvZXMgZXhpc3QsIG1vdmUgZnJvbSByZW1vdGUgdG8gbG9jYWwuIFRoaXMgcmVhbGx5IHNob3VsZG4ndCBiZSB0aGF0IGJpZyBhIGRlYWwgYnV0IHdlIG1pZ2h0IGVuY291bnRlciBpdC5cclxuXHRcdFxyXG5cdFx0Ly9PbiBWYXVsdCBzYXZlLCBzeW5jIHRvIHJlbW90ZSBcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbihcIm1vZGlmeVwiLCAoKT0+e3JzeW5jd3JhcHBlcihsb2NhbCt2YXVsdE5hbWUsIHJlbW90ZSwgdGhpcy5zZXR0aW5ncyl9KSk7XHJcblxyXG5cdFx0Ly9PbiBmaWxlIGRlbGV0ZVxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdkZWxldGUnLCBmdW5jdGlvbihmaWxlKXtcclxuXHRcdFx0Y29uc29sZS5sb2coKGZpbGUpKTtcclxuXHRcdH0pKTtcclxuXHJcblx0XHQvL09uIGZpbGUgbW92ZS9yZW5hbWVcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgZnVuY3Rpb24oZmlsZSwgb2xkUGF0aCl7XHJcblx0XHRcdHJzeW5jZGVsZXRlKGFwcC52YXVsdC5hZGFwdGVyLmJhc2VQYXRoLnNsaWNlKDMsIC12YXVsdE5hbWUubGVuZ3RoKSwgb2xkUGF0aCwgc2V0dGluZ3MsIHZhdWx0TmFtZSkgLy9TbGljZSBpcyBXSU5ET1dTIE9OTFlcclxuXHRcdFx0Ly9yc3luY3dyYXBwZXIobG9jYWwrdmF1bHROYW1lLCByZW1vdGUsIHNldHRpbmdzKSAvL1Jlc3luYyBuZXcgY2hhbmdlc1xyXG5cdFx0fSkpO1xyXG5cclxuXHJcblx0XHQvL0tlZXBpbmcgdGhpcyBmb3IgcmVmZXJlbmNlIGxvbFxyXG5cdFx0aWYoZGVidWcpIHtcclxuXHRcdFx0Ly8gVGhpcyBjcmVhdGVzIGFuIGljb24gaW4gdGhlIGxlZnQgcmliYm9uLlxyXG5cdFx0XHRjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oJ2RpY2UnLCAnU2FtcGxlIFBsdWdpbicsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0XHQvLyBDYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIGljb24uXHJcblx0XHRcdFx0bmV3IE5vdGljZSgnVGhpcyBpcyBhIG5vdGljZSEnKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXHJcblx0XHRcdHJpYmJvbkljb25FbC5hZGRDbGFzcygnbXktcGx1Z2luLXJpYmJvbi1jbGFzcycpO1xyXG5cclxuXHRcdFx0Ly8gVGhpcyBhZGRzIGEgc3RhdHVzIGJhciBpdGVtIHRvIHRoZSBib3R0b20gb2YgdGhlIGFwcC4gRG9lcyBub3Qgd29yayBvbiBtb2JpbGUgYXBwcy5cclxuXHRcdFx0Y29uc3Qgc3RhdHVzQmFySXRlbUVsID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XHJcblx0XHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdTdGF0dXMgQmFyIFRleHQnKTtcclxuXHJcblx0XHRcdC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxyXG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiAnb3Blbi1zYW1wbGUtbW9kYWwtc2ltcGxlJyxcclxuXHRcdFx0XHRuYW1lOiAnT3BlbiBzYW1wbGUgbW9kYWwgKHNpbXBsZSknLFxyXG5cdFx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XHJcblx0XHRcdFx0XHRuZXcgU2FtcGxlTW9kYWwodGhpcy5hcHApLm9wZW4oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvLyBUaGlzIGFkZHMgYW4gZWRpdG9yIGNvbW1hbmQgdGhhdCBjYW4gcGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvbiB0aGUgY3VycmVudCBlZGl0b3IgaW5zdGFuY2VcclxuXHRcdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0XHRpZDogJ3NhbXBsZS1lZGl0b3ItY29tbWFuZCcsXHJcblx0XHRcdFx0bmFtZTogJ1NhbXBsZSBlZGl0b3IgY29tbWFuZCcsXHJcblx0XHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlZGl0b3IuZ2V0U2VsZWN0aW9uKCkpO1xyXG5cdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oJ1NhbXBsZSBFZGl0b3IgQ29tbWFuZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdC8vIFRoaXMgYWRkcyBhIGNvbXBsZXggY29tbWFuZCB0aGF0IGNhbiBjaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHAgYWxsb3dzIGV4ZWN1dGlvbiBvZiB0aGUgY29tbWFuZFxyXG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRcdGlkOiAnb3Blbi1zYW1wbGUtbW9kYWwtY29tcGxleCcsXHJcblx0XHRcdFx0bmFtZTogJ09wZW4gc2FtcGxlIG1vZGFsIChjb21wbGV4KScsXHJcblx0XHRcdFx0Y2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBDb25kaXRpb25zIHRvIGNoZWNrXHJcblx0XHRcdFx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRcdFx0aWYgKG1hcmtkb3duVmlldykge1xyXG5cdFx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyB0cnVlLCB3ZSdyZSBzaW1wbHkgXCJjaGVja2luZ1wiIGlmIHRoZSBjb21tYW5kIGNhbiBiZSBydW4uXHJcblx0XHRcdFx0XHRcdC8vIElmIGNoZWNraW5nIGlzIGZhbHNlLCB0aGVuIHdlIHdhbnQgdG8gYWN0dWFsbHkgcGVyZm9ybSB0aGUgb3BlcmF0aW9uLlxyXG5cdFx0XHRcdFx0XHRpZiAoIWNoZWNraW5nKSB7XHJcblx0XHRcdFx0XHRcdFx0bmV3IFNhbXBsZU1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXHJcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXHJcblx0XHQvLyBVc2luZyB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHdoZW4gdGhpcyBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0Ly9jb25zb2xlLmxvZygnY2xpY2snLCBldnQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gV2hlbiByZWdpc3RlcmluZyBpbnRlcnZhbHMsIHRoaXMgZnVuY3Rpb24gd2lsbCBhdXRvbWF0aWNhbGx5IGNsZWFyIHRoZSBpbnRlcnZhbCB3aGVuIHRoZSBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHQvL3RoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzIFNhbXBsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCkge1xyXG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLnNldFRleHQoJ1dvYWghJyk7XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCkge1xyXG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBNeVBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdTeW5jIFNldHRpbmdzLid9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1NTSCBLZXkgUGF0aCcpXHJcblx0XHRcdC5zZXREZXNjKCdZb3VyIFNTSCBQcml2YXRlIEtleSwgdXNlZCBmb3IgbG9nZ2luZyBpbnRvIHNlcnZlci4gUGxlYXNlIGdlbmVyYXRlIHRoZSBrZXkgdG8gdXNlIG5vIHBhc3N3b3JkLCBqdXN0IHdvbnQgd29yayBvdGhlcndpc2UuIElmIHlvdVxcJ3JlIG9uIFdpbmRvd3MsIHVzZSB0aGUgY3lnZHJpdmUgcGF0aCB0byB0aGUga2V5LicpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGhlIHBhdGggdG8geW91ciBzZWNyZXQga2V5LicpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmtleVBhdGgpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mua2V5UGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdSZW1vdGUgYWRkcmVzcycpXHJcblx0XHRcdC5zZXREZXNjKCdSZW1vdGUgc2VydmVyIFVSTC9JUCcpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignbmFtZUBleGFtcGxlLmNvbScpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW90ZVVybClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdGVVcmwgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUmVtb3RlIGRpcmVjdG9yeScpXHJcblx0XHRcdC5zZXREZXNjKCdQYXRoIHRvIHRoZSByZW1vdGUgYmFja3VwIGZvbGRlci4nKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ34vLm9ic2lkaWFuL3N5bmMnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdGVQYXRoKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW90ZVBhdGggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQ3lnd2luIGJhc2ggcGF0aCcpXHJcblx0XHRcdC5zZXREZXNjKCdOZWVkZWQgZm9yIFdpbmRvd3MuJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdGOi9jeWd3aW4vYmluL2Jhc2guZXhlJylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3lnd2luUGF0aClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jeWd3aW5QYXRoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0XHJcblx0XHRcclxuXHR9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUEsUUFBSSxRQUFRLFFBQVEsaUJBQWlCO0FBQ3JDLFFBQUksT0FBTyxRQUFRO0FBRW5CLEFBdUNBLG9CQUFlLFFBQVE7QUFDbkIsVUFBSSxDQUFFLGlCQUFnQixTQUFRO0FBQzFCLGVBQU8sSUFBSSxPQUFNO0FBQUE7QUFJckIsZUFBUyxVQUFVO0FBQ25CLFVBQUksT0FBTyxXQUFZLFVBQVU7QUFDN0IsY0FBTSxJQUFJLE1BQU07QUFBQTtBQUlwQixXQUFLLGNBQWMsTUFBTSxRQUFRLGdCQUFnQixPQUFPLGFBQWE7QUFHckUsV0FBSyxtQkFBbUIsTUFBTSxRQUFRLHFCQUFxQixPQUFPLGtCQUFrQjtBQUdwRixXQUFLLFdBQWU7QUFDcEIsV0FBSyxlQUFlO0FBR3BCLFdBQUssWUFBWTtBQUdqQixXQUFLLFdBQVc7QUFHaEIsV0FBSyxrQkFB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
